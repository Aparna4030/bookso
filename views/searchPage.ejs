<%- include('partials/head.ejs') %> 
  <%- include('partials/navbar.ejs') %>

  <div class="container ml-2 p-4 d-flex">

    <div class="col-3 bg-light shadow rounded" style="height: 70vh; width: 35vh">
      <div class=" w-100 bg-bookso text-center py-2 fw-bold rounded-top" >FILTER PRODUCTS</div>
      <div class="mt-4 w-100 h-50 d-flex flex-column ps-2 pe-2  justify-content-around ">
        <div class="accordion" id="accordionExample">
            <div class="accordion-item">
              <h2 class="accordion-header" id="headingTwo">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                  Category
                </button>
              </h2>
              <div id="collapseTwo" class="accordion-collapse collapse " aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                <div class="accordion-body d-flex flex-column">
                <% categories.forEach(element => { %>
                  <a href="/search?q=<%= q %>&cat=<%= element._id %>&sort=<%= sort %>&lang=<%= lang %>"><%= element.name %></a>      
                <% }) %>
                </div>
              </div>
            </div>
            <div class="accordion-item">
              <h2 class="accordion-header" id="headingThree">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                Language
                </button>
              </h2>
              <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                <div class="accordion-body d-flex flex-column">
                  
                    <a href="/search?q=<%= q %>&cat=<%= cat %>&sort=<%= sort %>&lang=English">English</a>      
                    <a href="/search?q=<%= q %>&cat=<%= cat %>&sort=<%= sort %>&lang=Malayalam">Malayalam</a>      
                  
                </div>
              </div>
            </div>
          </div>
    </div>
      </div>
      <div class="col-10 px-4 ">
        <div class="dropdown d-flex justify-content-end me-5">
          <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
            Sort
          </button>
          <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
            <li><a class="dropdown-item" href="/search?q=<%= q %>&cat=<%= cat %>&sort=lth&lang=<%= lang %>">Price: Low to High</a></li>
            <li><a class="dropdown-item" href="/search?q=<%= q %>&cat=<%= cat %>&sort=htl&lang=<%= lang %>">Price: High to Low</a></li>
            <li><a class="dropdown-item" href="/search?q=<%= q %>&cat=<%= cat %>&sort=az&lang=<%= lang %>">Alphabetical: A-Z</a></li>
            <li><a class="dropdown-item" href="/search?q=<%= q %>&cat=<%= cat %>&sort=za&lang=<%= lang %>">Alphabetical: Z-A</a></li>
          </ul>
        </div>
        
<div class="container d-flex flex-wrap ">
    <% searchResults.forEach(product => { %>
        <div class="card mt-3 me-3" style="width: 16rem;">
            <a href="/product/<%= product._id %>">
            <img src="../uploads/<%=  product.image[0] %>" class="card-img-top w-50" alt="..." style="margin-left: 60px"></a>
            <div class="card-body shadow h-25">
                <h5 class="card-title"><%= product.name %></h5>
                <p class="card-text text-primary">â‚¹<%= product.price %></p>
                <% if (wishlistProducts && wishlistProducts.find(obj=>obj.productId.toString() == product._id.toString())) { %>
                  <i class="fa-solid fa-heart" style="color: #ff0000;"></i>
                <% }else{ %>
                  <!-- <a href="#"><i class="fa-regular fa-heart" style="color: #000000;"></i></a> -->
                  <% } %>
            </div>
            </div>
    <% }) %>
</div>
</div>
</div>
  
<%- include('partials/closingHead.ejs') %>