<%- include('partials/head.ejs') %> 
<%- include('partials/navbar.ejs') %>

<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
  rel="stylesheet"
  integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
  crossorigin="anonymous"
/>

<div class="container ml-2 p-4 d-flex">

  <div class="col-3 bg-light shadow rounded" style="height: 70vh; width: 35vh">
    <div class="w-100 bg-bookso text-center py-2 fw-bold font-color-secondary rounded-top" >ADMIN PANEL</div>
    <div class="w-100 h-75 d-flex flex-column ps-4 justify-content-around text-bookso fw-bold mt-3 custom-text-shadow">
      <a class="text-decoration-none text-bookso" href="/admin"><div><i class="fa-solid fa-layer-group pe-2" style="color: #535351;"></i>DASHBOARD</div></a>
      <a class="text-decoration-none text-bookso" href="/admin/products"><div><i class="fa-solid fa-cubes-stacked pe-2" style="color: #535351;"></i>PRODUCTS</div></a>
      <a class="text-decoration-none text-bookso" href="/admin/customers"><div><i class="fa-solid fa-users pe-2" style="color: #535351;"></i>CUSTOMERS</div></a>
      <a class="text-decoration-none text-bookso" href="/admin/orders"><div><i class="fa-solid fa-cart-shopping pe-2" style="color: #535351;"></i>ORDERS</div></a>
      <a class="text-decoration-none text-bookso" href="/admin/category"><div><i class="fa-solid fa-list pe-2" style="color: #535351;"></i>CATEGORY</div></a>
      <a class="text-decoration-none text-bookso" href="/admin/report"><div><i class="fa-solid fa-universal-access pe-2" style="color: #535351;"></i>SALES REPORT</div></a>
      <a class="text-decoration-none text-bookso" href="/admin/banner"><div><i class="fa-regular fa-flag pe-2" style="color: #535351;"></i>BANNER MANAGE</div></a>
      <a class="text-decoration-none text-bookso" href="/admin/coupons"><div><i class="fa-solid fa-ticket-simple pe-2" style="color: #535351;"></i>MANAGE COUPONS</div></a>
  </div>
    </div>


    
    <div class="col-9 px-4">
      <div class="py-3 mx-3 shadow custom-box-shadow">
        <div class="text-center text-bookso fs-4 fw-bold">ORDERS</div>
        <hr style="color: #f6ef38; height: 6px" />
        <% orders.forEach(order => { %>
              <div class="mx-3 border rounded border-2 h-75 p-4 shadow">
                  <div class="">
                  <div>
                      <table class="table">
                          <tbody>
                            <tr>
                              <td class="fw-bold">Order Id:</td>
                              <td><%= order._id %></td>
                            </tr>
                            <tr>
                              <td class="fw-bold">Address:</td>
                              <td><%= `${order?.address?.name}, ${order?.address?.address}, ${order?.address?.phone}` %></td>
                            </tr>
                            <tr>
                              <td class="fw-bold">Payment Method:</td>
                              <td><%= order.paymentMethod %></td>
                            </tr>
                            <tr>
                              <td class="fw-bold">Amount:</td>
                              <td>₹<%= order.amount %></td>
                            </tr>
                            <tr>
                              <td class="fw-bold">Delivery Charges:</td>
                              <td>₹<%= order.deliveryCharge %></td>
                            </tr>
                            <tr>
                              <td class="fw-bold">Discount</td>
                              <td>₹<%= order.discount %></td>
                            </tr>
                            <tr>
                              <td class="fw-bold">Total Amount</td>
                              <td>₹<%= order.totalAmount %></td>
                            </tr>
                            <tr>
                              <td class="fw-bold">Status:</td>
                              <td><%= order.status %></td>
                            </tr>
                            <tr>
                              <% if (order.productCancellation.cancelStatus === true) { %>
                                <div class="alert alert-danger" role="alert">Cancel Product: <%= order.productCancellation.description %></div>   
                              <% if (order.productCancellation.returnStatus === true) { %>
                                <div class="alert alert-danger" role="alert">Return Product</div> 
                              <% } %>
                              <% } %>
                            </tr>
                           
                          </tbody>
                        </table>
          
                  </div>
                      <h5>Items</h5>
                  <div class="d-flex mt-2 mb-2 align-items-center flex-column p-3">
                  
          
                  <% order.items.forEach(product => { %>
                      <div class="card mx-3 border rounded h-100 m-1 w-100">
                          <div class="card-body d-flex align-items-center">
                            <img src="/uploads/<%= product.productId.image[0] %>" class="card-img-top" alt="Product Image" style="width: 70px; height: 70px;">
                            <div class="ms-3">
                              <h5 class="card-title fw-bold mb-1 text-primary"><%= product.productId.name %></h5>
                              <p class="card-text mb-1 text-secondary">Price: ₹<%= product.productId.price %></p>
                              <p class="card-text mb-1 text-secondary">Quantity: <%= product.qty %></p>
                            </div>
                          </div>
                        </div>
                  <% }) %>
          
              </div>
                </div>
              </div>
            </div>
            <% })%>
          </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/9160c00447.js" crossorigin="anonymous"></script>
    